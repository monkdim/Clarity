#!/bin/bash
# Clarity Terminal â€” standalone launcher
# Opens Terminal.app and runs the Clarity shell

DIR="$(cd "$(dirname "$0")" && pwd)"
CLARITY="$DIR/clarity"

# First-time setup: if clarity binary isn't here, check common locations
if [ ! -f "$CLARITY" ]; then
    if [ -f /usr/local/bin/clarity ]; then
        CLARITY=/usr/local/bin/clarity
    else
        osascript -e 'display dialog "Clarity binary not found.\n\nCopy clarity-macos-arm64 (or x64) into:\n'$DIR'/clarity\n\nOr install to /usr/local/bin/clarity" with title "Clarity" buttons {"OK"} default button "OK"'
        exit 1
    fi
fi

# Open Terminal.app with Clarity shell
osascript -e "
tell application \"Terminal\"
    activate
    do script \"clear && '$CLARITY' shell; exit\"
end tell
"
