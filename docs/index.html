<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clarity Language — Documentation</title>
<style>
:root {
    --bg: #fafafa;
    --surface: #ffffff;
    --text: #1a1a2e;
    --subtext: #666;
    --accent: #4A90D9;
    --accent2: #2d6cb4;
    --code-bg: #f0f0f0;
    --border: #e0e0e0;
    --sidebar-w: 260px;
}
@media (prefers-color-scheme: dark) {
    :root {
        --bg: #1e1e2e;
        --surface: #181825;
        --text: #cdd6f4;
        --subtext: #a6adc8;
        --accent: #89b4fa;
        --accent2: #b4d0fb;
        --code-bg: #313244;
        --border: #45475a;
    }
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.7;
}
a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Layout */
.wrapper { display: flex; min-height: 100vh; }
nav {
    width: var(--sidebar-w);
    background: var(--surface);
    border-right: 1px solid var(--border);
    padding: 1.5rem 0;
    position: fixed;
    top: 0; left: 0; bottom: 0;
    overflow-y: auto;
}
nav .logo {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--accent);
    padding: 0 1.25rem 1rem;
    border-bottom: 1px solid var(--border);
    margin-bottom: 1rem;
}
nav .logo span { color: var(--subtext); font-weight: 400; font-size: 0.85rem; }
nav ul { list-style: none; }
nav li { margin: 0; }
nav li a {
    display: block;
    padding: 0.35rem 1.25rem;
    color: var(--subtext);
    font-size: 0.9rem;
    transition: all 0.15s;
}
nav li a:hover, nav li a.active {
    color: var(--accent);
    background: var(--code-bg);
    text-decoration: none;
}
nav .section-title {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--subtext);
    padding: 0.75rem 1.25rem 0.25rem;
}

main {
    margin-left: var(--sidebar-w);
    flex: 1;
    max-width: 800px;
    padding: 2rem 3rem;
}
h1 { font-size: 2rem; margin-bottom: 0.5rem; }
h2 { font-size: 1.5rem; margin: 2rem 0 0.75rem; padding-top: 1rem; border-top: 1px solid var(--border); }
h3 { font-size: 1.15rem; margin: 1.5rem 0 0.5rem; }
p { margin-bottom: 1rem; }
code {
    font-family: 'Fira Code', 'SF Mono', monospace;
    font-size: 0.9em;
    background: var(--code-bg);
    padding: 0.15em 0.4em;
    border-radius: 3px;
}
pre {
    background: var(--code-bg);
    padding: 1rem;
    border-radius: 6px;
    overflow-x: auto;
    margin-bottom: 1rem;
    font-size: 0.9rem;
    line-height: 1.5;
}
pre code { background: none; padding: 0; }
table { width: 100%; border-collapse: collapse; margin-bottom: 1rem; }
th, td { padding: 0.5rem 0.75rem; border: 1px solid var(--border); text-align: left; }
th { background: var(--code-bg); font-weight: 600; }
.badge {
    display: inline-block;
    padding: 0.15em 0.5em;
    font-size: 0.75rem;
    border-radius: 3px;
    background: var(--accent);
    color: white;
    font-weight: 600;
}

@media (max-width: 800px) {
    nav { display: none; }
    main { margin-left: 0; padding: 1rem; }
}
</style>
</head>
<body>
<div class="wrapper">
<nav>
    <div class="logo">Clarity <span>v0.5.0</span></div>
    <div class="section-title">Getting Started</div>
    <ul>
        <li><a href="#intro" class="active">Introduction</a></li>
        <li><a href="#install">Installation</a></li>
        <li><a href="#hello">Hello World</a></li>
        <li><a href="#repl">The REPL</a></li>
    </ul>
    <div class="section-title">Language Guide</div>
    <ul>
        <li><a href="#variables">Variables</a></li>
        <li><a href="#types">Types</a></li>
        <li><a href="#functions">Functions</a></li>
        <li><a href="#control">Control Flow</a></li>
        <li><a href="#classes">Classes</a></li>
        <li><a href="#enums">Enums</a></li>
        <li><a href="#interfaces">Interfaces</a></li>
        <li><a href="#errors">Error Handling</a></li>
        <li><a href="#modules">Modules</a></li>
        <li><a href="#collections">Collections</a></li>
        <li><a href="#functional">Functional</a></li>
        <li><a href="#async">Async</a></li>
        <li><a href="#decorators">Decorators</a></li>
    </ul>
    <div class="section-title">Standard Library</div>
    <ul>
        <li><a href="#stdlib-io">I/O &amp; Files</a></li>
        <li><a href="#stdlib-string">Strings</a></li>
        <li><a href="#stdlib-math">Math</a></li>
        <li><a href="#stdlib-collections">Collections</a></li>
        <li><a href="#stdlib-process">Process</a></li>
        <li><a href="#stdlib-net">Networking</a></li>
        <li><a href="#stdlib-testing">Testing</a></li>
    </ul>
    <div class="section-title">Tools</div>
    <ul>
        <li><a href="#cli">CLI Reference</a></li>
        <li><a href="#packages">Packages</a></li>
        <li><a href="#editor">Editor Support</a></li>
        <li><a href="#playground">Playground</a></li>
    </ul>
</nav>

<main>
<h1 id="intro">Clarity</h1>
<p>A modern, readable programming language that compiles to native binaries.</p>
<p>Clarity combines the best ideas from Python, Rust, and JavaScript into a cohesive language that's
   easy to learn, fun to write, and fast to run.</p>

<pre><code>-- Hello World in Clarity
fn greet(name) {
    show "Hello, " + name + "!"
}

greet("World")
</code></pre>

<h2 id="install">Installation</h2>
<p>Install Clarity using pip (Python bootstrap) or download a native binary:</p>
<pre><code># From source
pip install -e .

# Or build native binary
python native/transpile.py
./clarity-native --version
</code></pre>

<h2 id="hello">Hello World</h2>
<p>Create a file called <code>hello.clarity</code>:</p>
<pre><code>show "Hello, Clarity!"
</code></pre>
<p>Run it:</p>
<pre><code>clarity run hello.clarity
</code></pre>

<h2 id="repl">The REPL</h2>
<p>Start an interactive session:</p>
<pre><code>clarity repl</code></pre>
<p>Features: syntax highlighting, tab completion, persistent history, and pretty-printed output.</p>

<h2 id="variables">Variables</h2>
<p>Clarity has immutable (<code>let</code>) and mutable (<code>mut</code>) bindings:</p>
<pre><code>let name = "Clarity"     -- immutable
mut counter = 0          -- mutable
counter += 1             -- OK
-- name = "other"        -- Error: immutable
</code></pre>

<h2 id="types">Types</h2>
<table>
<tr><th>Type</th><th>Examples</th><th>Notes</th></tr>
<tr><td><code>number</code></td><td><code>42</code>, <code>3.14</code></td><td>64-bit float</td></tr>
<tr><td><code>string</code></td><td><code>"hello"</code></td><td>UTF-8, immutable</td></tr>
<tr><td><code>bool</code></td><td><code>true</code>, <code>false</code></td><td></td></tr>
<tr><td><code>null</code></td><td><code>null</code></td><td>Absence of value</td></tr>
<tr><td><code>list</code></td><td><code>[1, 2, 3]</code></td><td>Dynamic arrays</td></tr>
<tr><td><code>map</code></td><td><code>{a: 1, b: 2}</code></td><td>Hash maps</td></tr>
<tr><td><code>function</code></td><td><code>fn(x) { x * 2 }</code></td><td>First-class</td></tr>
</table>

<h2 id="functions">Functions</h2>
<pre><code>fn add(a, b) {
    return a + b
}

-- Variadic
fn log(msg, ...args) {
    show msg
    each(args, fn(a) { show "  " + str(a) })
}

-- Lambda
let double = fn(x) { x * 2 }
let triple = x => x * 3

-- Default returns last expression
fn square(n) { n * n }
</code></pre>

<h2 id="control">Control Flow</h2>
<pre><code>-- If / elif / else
if x > 0 {
    show "positive"
} elif x < 0 {
    show "negative"
} else {
    show "zero"
}

-- If expression
let sign = if x > 0 { "+" } else { "-" }

-- For loop
for item in [1, 2, 3] {
    show item
}

-- While loop
mut i = 0
while i < 10 {
    i += 1
}

-- Match expression
match value {
    when 1 { show "one" }
    when 2 { show "two" }
    else { show "other" }
}
</code></pre>

<h2 id="classes">Classes</h2>
<pre><code>class Animal {
    fn init(name, sound) {
        this.name = name
        this.sound = sound
    }

    fn speak() {
        return this.name + " says " + this.sound
    }
}

class Dog < Animal {
    fn init(name) {
        this.name = name
        this.sound = "Woof!"
        this.tricks = []
    }

    fn learn(trick) {
        push(this.tricks, trick)
    }
}

let dog = Dog("Rex")
show dog.speak()    -- "Rex says Woof!"
</code></pre>

<h2 id="enums">Enums</h2>
<pre><code>enum Color {
    Red = "red",
    Green = "green",
    Blue = "blue"
}

let c = Color.Red
show str(c)         -- "red"
</code></pre>

<h2 id="interfaces">Interfaces</h2>
<pre><code>interface Printable {
    fn to_string()
}

impl Printable for Vector {
    fn to_string() {
        return "(" + str(this.x) + ", " + str(this.y) + ")"
    }
}
</code></pre>

<h2 id="errors">Error Handling</h2>
<pre><code>try {
    let result = risky_operation()
    show result
} catch e {
    show "Error: " + str(e)
}

-- Throw errors
fn divide(a, b) {
    if b == 0 { throw "Division by zero" }
    return a / b
}
</code></pre>

<h2 id="modules">Modules</h2>
<pre><code>-- Import from file
from "math.clarity" import sqrt, pi

-- Import all
from "utils.clarity" import *

-- Import with alias
from "collections.clarity" import HashMap as HM
</code></pre>

<h2 id="collections">Collections</h2>
<pre><code>-- Lists
let items = [1, 2, 3, 4, 5]
push(items, 6)
let first = items[0]
let length = len(items)

-- Maps
let config = {host: "localhost", port: 8080}
let host = config["host"]
let ks = keys(config)

-- List comprehension
let squares = [x ** 2 for x in range(1, 11)]

-- Map comprehension
let lookup = {str(n): n * n for n in range(5)}
</code></pre>

<h2 id="functional">Functional Programming</h2>
<pre><code>let numbers = range(1, 11)

-- Map, filter, reduce
let evens = filter(numbers, fn(n) { n % 2 == 0 })
let doubled = map(numbers, fn(n) { n * 2 })
let sum = reduce(numbers, 0, fn(a, b) { a + b })

-- Pipe operator
let result = numbers
    |> filter(fn(n) { n > 3 })
    |> map(fn(n) { n * n })
    |> sum()

-- Compose
let transform = compose(double, increment, abs)
</code></pre>

<h2 id="async">Async / Await</h2>
<pre><code>async fn fetch_data(url) {
    let response = await fetch(url)
    return json_parse(response)
}

-- Parallel tasks
let results = await parallel([
    fn() { fetch_data("/api/users") },
    fn() { fetch_data("/api/posts") }
])
</code></pre>

<h2 id="decorators">Decorators</h2>
<pre><code>@memoize
fn fibonacci(n) {
    if n <= 1 { return n }
    return fibonacci(n - 1) + fibonacci(n - 2)
}

@log_calls
@validate_args
fn process(data) {
    -- decorated function
}
</code></pre>

<h2 id="stdlib-io">Standard Library — I/O</h2>
<table>
<tr><th>Function</th><th>Description</th></tr>
<tr><td><code>show(value)</code></td><td>Print to stdout</td></tr>
<tr><td><code>ask(prompt)</code></td><td>Read line from stdin</td></tr>
<tr><td><code>read(path)</code></td><td>Read file contents</td></tr>
<tr><td><code>write(path, data)</code></td><td>Write file</td></tr>
<tr><td><code>append(path, data)</code></td><td>Append to file</td></tr>
<tr><td><code>exists(path)</code></td><td>Check if file exists</td></tr>
<tr><td><code>lines(path)</code></td><td>Read file as list of lines</td></tr>
</table>

<h2 id="stdlib-string">Standard Library — Strings</h2>
<table>
<tr><th>Function</th><th>Description</th></tr>
<tr><td><code>split(s, delim)</code></td><td>Split string</td></tr>
<tr><td><code>join(list, delim)</code></td><td>Join list into string</td></tr>
<tr><td><code>replace(s, old, new)</code></td><td>Replace occurrences</td></tr>
<tr><td><code>trim(s)</code></td><td>Strip whitespace</td></tr>
<tr><td><code>upper(s)</code> / <code>lower(s)</code></td><td>Case conversion</td></tr>
<tr><td><code>contains(s, sub)</code></td><td>Check substring</td></tr>
<tr><td><code>starts(s, prefix)</code></td><td>Check prefix</td></tr>
<tr><td><code>ends(s, suffix)</code></td><td>Check suffix</td></tr>
<tr><td><code>substring(s, start, end)</code></td><td>Extract substring</td></tr>
<tr><td><code>chars(s)</code></td><td>String to char list</td></tr>
</table>

<h2 id="stdlib-math">Standard Library — Math</h2>
<table>
<tr><th>Function</th><th>Description</th></tr>
<tr><td><code>abs(n)</code></td><td>Absolute value</td></tr>
<tr><td><code>round(n)</code> / <code>floor(n)</code> / <code>ceil(n)</code></td><td>Rounding</td></tr>
<tr><td><code>min(a, b)</code> / <code>max(a, b)</code></td><td>Min/max</td></tr>
<tr><td><code>sqrt(n)</code> / <code>pow(a, b)</code></td><td>Power functions</td></tr>
<tr><td><code>sin(n)</code> / <code>cos(n)</code> / <code>tan(n)</code></td><td>Trigonometry</td></tr>
<tr><td><code>log(n)</code></td><td>Natural logarithm</td></tr>
<tr><td><code>random()</code></td><td>Random [0, 1)</td></tr>
<tr><td><code>pi</code> / <code>e</code></td><td>Constants</td></tr>
</table>

<h2 id="stdlib-collections">Standard Library — Collections</h2>
<table>
<tr><th>Function</th><th>Description</th></tr>
<tr><td><code>map(list, fn)</code></td><td>Transform elements</td></tr>
<tr><td><code>filter(list, fn)</code></td><td>Filter by predicate</td></tr>
<tr><td><code>reduce(list, init, fn)</code></td><td>Fold/reduce</td></tr>
<tr><td><code>each(list, fn)</code></td><td>Iterate (no return)</td></tr>
<tr><td><code>find(list, fn)</code></td><td>Find first match</td></tr>
<tr><td><code>every(list, fn)</code></td><td>All match predicate</td></tr>
<tr><td><code>some(list, fn)</code></td><td>Any match predicate</td></tr>
<tr><td><code>sort(list)</code></td><td>Sort elements</td></tr>
<tr><td><code>unique(list)</code></td><td>Remove duplicates</td></tr>
<tr><td><code>flat(list)</code></td><td>Flatten nested lists</td></tr>
<tr><td><code>zip(a, b)</code></td><td>Pair elements</td></tr>
</table>

<h2 id="stdlib-process">Standard Library — Process</h2>
<table>
<tr><th>Function</th><th>Description</th></tr>
<tr><td><code>exec(cmd)</code></td><td>Run shell command, return stdout</td></tr>
<tr><td><code>exec_full(cmd)</code></td><td>Run command, return {stdout, stderr, exit_code}</td></tr>
<tr><td><code>exit(code)</code></td><td>Exit with status code</td></tr>
<tr><td><code>sleep(seconds)</code></td><td>Sleep</td></tr>
<tr><td><code>time()</code></td><td>Unix timestamp</td></tr>
<tr><td><code>env(name)</code></td><td>Get environment variable</td></tr>
<tr><td><code>args()</code></td><td>Command line arguments</td></tr>
<tr><td><code>cwd()</code></td><td>Current working directory</td></tr>
</table>

<h2 id="stdlib-net">Standard Library — Networking</h2>
<table>
<tr><th>Function</th><th>Description</th></tr>
<tr><td><code>fetch(url)</code></td><td>HTTP GET request</td></tr>
<tr><td><code>serve(port, handler)</code></td><td>HTTP server</td></tr>
</table>

<h2 id="stdlib-testing">Standard Library — Testing</h2>
<pre><code>from "testing.clarity" import describe, it, expect

describe("Math", fn() {
    it("adds numbers", fn() {
        expect(1 + 2).to_equal(3)
    })

    it("handles negative", fn() {
        expect(-5).to_be_less_than(0)
    })
})
</code></pre>

<h2 id="cli">CLI Reference</h2>
<pre><code>clarity run &lt;file&gt;          # Run a Clarity program
clarity check &lt;file&gt;        # Parse and check for errors
clarity repl                 # Interactive REPL
clarity test [dir]           # Run test files
clarity fmt &lt;file&gt;           # Format source code
clarity lint &lt;file&gt;          # Lint source code
clarity init                 # Initialize new project
clarity install [pkg]        # Install dependencies
clarity publish              # Publish package
clarity search &lt;query&gt;      # Search package registry
clarity build                # Build native binary
clarity version              # Show version
</code></pre>

<h2 id="packages">Package Management</h2>
<p>Define your project in <code>clarity.toml</code>:</p>
<pre><code>[package]
name = "my-app"
version = "1.0.0"
entry = "main.clarity"

[dependencies]
http = "^1.2.0"
json = "~2.0.0"
</code></pre>
<p>Install dependencies: <code>clarity install</code></p>
<p>Publish: <code>clarity publish</code></p>

<h2 id="editor">Editor Support</h2>
<p>VS Code extension provides:</p>
<ul>
<li>Syntax highlighting via TextMate grammar</li>
<li>LSP integration for diagnostics, completion, hover</li>
<li>22 code snippets (<code>fn</code>, <code>class</code>, <code>for</code>, <code>if</code>, etc.)</li>
<li>Commands: Run, Check, Format, Lint</li>
</ul>
<p>Install from <code>editors/vscode/</code> or the VS Code marketplace.</p>

<h2 id="playground">Playground</h2>
<p>Try Clarity in your browser at <a href="../playground/index.html">the playground</a>.
   No installation required — code runs client-side via a JS interpreter.</p>

</main>
</div>

<script>
// Highlight active nav link on scroll
const sections = document.querySelectorAll('h1[id], h2[id]');
const navLinks = document.querySelectorAll('nav a');
window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(s => {
        if (window.scrollY >= s.offsetTop - 100) current = s.id;
    });
    navLinks.forEach(a => {
        a.classList.toggle('active', a.getAttribute('href') === '#' + current);
    });
});
</script>
</body>
</html>
