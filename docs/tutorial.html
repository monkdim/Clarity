<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clarity Tutorial — Getting Started</title>
<style>
:root {
    --bg: #fafafa; --surface: #ffffff; --text: #1a1a2e; --subtext: #666;
    --accent: #4A90D9; --accent2: #2d6cb4; --code-bg: #f0f0f0; --border: #e0e0e0;
    --sidebar-w: 260px;
}
@media (prefers-color-scheme: dark) {
    :root {
        --bg: #1e1e2e; --surface: #181825; --text: #cdd6f4; --subtext: #a6adc8;
        --accent: #89b4fa; --accent2: #b4d0fb; --code-bg: #313244; --border: #45475a;
    }
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); line-height: 1.7; }
a { color: var(--accent); text-decoration: none; } a:hover { text-decoration: underline; }
.wrapper { display: flex; min-height: 100vh; }
nav { width: var(--sidebar-w); background: var(--surface); border-right: 1px solid var(--border); padding: 1.5rem 0; position: fixed; top: 0; left: 0; bottom: 0; overflow-y: auto; }
nav .logo { font-size: 1.3rem; font-weight: 700; color: var(--accent); padding: 0 1.25rem 1rem; border-bottom: 1px solid var(--border); margin-bottom: 1rem; }
nav .logo span { color: var(--subtext); font-weight: 400; font-size: 0.85rem; }
nav ul { list-style: none; } nav li { margin: 0; }
nav li a { display: block; padding: 0.35rem 1.25rem; color: var(--subtext); font-size: 0.9rem; transition: all 0.15s; }
nav li a:hover, nav li a.active { color: var(--accent); background: var(--code-bg); text-decoration: none; }
nav .section-title { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; color: var(--subtext); padding: 0.75rem 1.25rem 0.25rem; }
main { margin-left: var(--sidebar-w); flex: 1; max-width: 800px; padding: 2rem 3rem; }
h1 { font-size: 2rem; margin-bottom: 0.5rem; }
h2 { font-size: 1.5rem; margin: 2rem 0 0.75rem; padding-top: 1rem; border-top: 1px solid var(--border); }
h3 { font-size: 1.15rem; margin: 1.5rem 0 0.5rem; }
p { margin-bottom: 1rem; }
code { font-family: 'Fira Code', 'SF Mono', monospace; font-size: 0.9em; background: var(--code-bg); padding: 0.15em 0.4em; border-radius: 3px; }
pre { background: var(--code-bg); padding: 1rem; border-radius: 6px; overflow-x: auto; margin-bottom: 1rem; font-size: 0.9rem; line-height: 1.5; }
pre code { background: none; padding: 0; }
.tip { background: var(--code-bg); border-left: 3px solid var(--accent); padding: 0.75rem 1rem; margin-bottom: 1rem; border-radius: 0 6px 6px 0; }
.tip strong { color: var(--accent); }
@media (max-width: 800px) { nav { display: none; } main { margin-left: 0; padding: 1rem; } }
</style>
</head>
<body>
<div class="wrapper">
<nav>
    <div class="logo">Clarity <span>Tutorial</span></div>
    <div class="section-title">Getting Started</div>
    <ul>
        <li><a href="#install">Install</a></li>
        <li><a href="#hello">Hello World</a></li>
        <li><a href="#repl">The REPL</a></li>
    </ul>
    <div class="section-title">Basics</div>
    <ul>
        <li><a href="#variables">Variables</a></li>
        <li><a href="#functions">Functions</a></li>
        <li><a href="#control">Control Flow</a></li>
        <li><a href="#lists">Lists &amp; Maps</a></li>
    </ul>
    <div class="section-title">Intermediate</div>
    <ul>
        <li><a href="#pipes">Pipes</a></li>
        <li><a href="#classes">Classes</a></li>
        <li><a href="#matching">Pattern Matching</a></li>
        <li><a href="#errors">Error Handling</a></li>
        <li><a href="#modules">Modules</a></li>
    </ul>
    <div class="section-title">Project</div>
    <ul>
        <li><a href="#project">Build a CLI Tool</a></li>
        <li><a href="#testing">Testing</a></li>
        <li><a href="#next">Next Steps</a></li>
    </ul>
    <div class="section-title">Navigation</div>
    <ul>
        <li><a href="index.html">Documentation</a></li>
        <li><a href="reference.html">Language Reference</a></li>
    </ul>
</nav>

<main>
<h1 id="top">Getting Started with Clarity</h1>
<p>This tutorial takes you from zero to building a real project in Clarity. No prior experience required.</p>

<h2 id="install">1. Install Clarity</h2>
<pre><code># macOS / Linux — one command
curl -fsSL https://raw.githubusercontent.com/monkdim/Clarity/main/install.sh | bash

# Or with Homebrew
brew install monkdim/tap/clarity

# Verify it works
clarity version
</code></pre>
<p>You should see <code>1.0.0</code>. You're ready to go.</p>

<h2 id="hello">2. Hello World</h2>
<p>Create a file called <code>hello.clarity</code>:</p>
<pre><code>show "Hello, World!"
</code></pre>
<p>Run it:</p>
<pre><code>clarity run hello.clarity
</code></pre>
<p>Output: <code>Hello, World!</code></p>

<div class="tip"><strong>Tip:</strong> <code>show</code> is Clarity's print function. It outputs any value to the terminal.</div>

<h2 id="repl">3. The Interactive REPL</h2>
<p>Start the REPL to experiment without creating files:</p>
<pre><code>clarity repl
</code></pre>
<pre><code>clarity> 2 + 3
5
clarity> "hello" + " world"
"hello world"
clarity> [1, 2, 3] |> map(x => x * 2)
[2, 4, 6]
</code></pre>
<p>The REPL has syntax highlighting, tab completion, and persistent history. Type <code>exit</code> to quit.</p>

<h2 id="variables">4. Variables</h2>
<p>Clarity has two kinds of variables:</p>
<pre><code>let name = "Alice"       -- immutable (can't change)
mut counter = 0          -- mutable (can change)

counter += 1             -- OK
-- name = "Bob"          -- Error! let bindings are immutable
</code></pre>
<div class="tip"><strong>Why immutable by default?</strong> Most variables don't need to change. Using <code>let</code> makes your code easier to reason about. Use <code>mut</code> only when you need it.</div>

<p>Clarity has these basic types:</p>
<pre><code>let age = 25             -- number (integer)
let pi = 3.14            -- number (float)
let greeting = "Hello"   -- string
let active = true        -- boolean
let nothing = null       -- null
let items = [1, 2, 3]    -- list
let config = {port: 80}  -- map
</code></pre>

<p>String interpolation works with curly braces inside double quotes:</p>
<pre><code>let name = "World"
show "Hello, {name}!"    -- Hello, World!
show "2 + 2 = {2 + 2}"  -- 2 + 2 = 4
</code></pre>

<h2 id="functions">5. Functions</h2>
<pre><code>fn greet(name) {
    show "Hello, {name}!"
}

greet("Alice")   -- Hello, Alice!
greet("Bob")     -- Hello, Bob!
</code></pre>

<p>Functions return the last expression automatically:</p>
<pre><code>fn add(a, b) { a + b }
fn square(n) { n * n }

show add(3, 4)       -- 7
show square(5)       -- 25
</code></pre>

<p>You can also use <code>return</code> explicitly for early returns:</p>
<pre><code>fn abs(n) {
    if n < 0 { return -n }
    return n
}
</code></pre>

<p>Lambdas are anonymous functions:</p>
<pre><code>let double = fn(x) { x * 2 }
let triple = x => x * 3

show double(5)   -- 10
show triple(5)   -- 15
</code></pre>

<h2 id="control">6. Control Flow</h2>
<pre><code>-- If / elif / else
let temp = 72
if temp > 80 {
    show "Hot!"
} elif temp > 60 {
    show "Nice"
} else {
    show "Cold"
}
</code></pre>

<pre><code>-- For loop
for fruit in ["apple", "banana", "cherry"] {
    show "I like {fruit}"
}

-- Range loop (0 to 4)
for i in 0..5 {
    show i
}

-- While loop
mut n = 1
while n <= 100 {
    n = n * 2
}
show n  -- 128
</code></pre>

<h2 id="lists">7. Lists and Maps</h2>
<pre><code>-- Lists
let fruits = ["apple", "banana", "cherry"]
show fruits[0]         -- apple
show len(fruits)       -- 3

mut numbers = [3, 1, 4, 1, 5]
push(numbers, 9)       -- add to end
sort(numbers)          -- sort in place
show numbers           -- [1, 1, 3, 4, 5, 9]
</code></pre>

<pre><code>-- Maps (key-value pairs)
let user = {name: "Alice", age: 30, active: true}
show user["name"]      -- Alice
show user.age          -- 30
show keys(user)        -- ["name", "age", "active"]
</code></pre>

<p>Functional operations on lists:</p>
<pre><code>let numbers = [1, 2, 3, 4, 5]

let doubled = map(numbers, x => x * 2)
show doubled   -- [2, 4, 6, 8, 10]

let evens = filter(numbers, x => x % 2 == 0)
show evens     -- [2, 4]

let total = reduce(numbers, 0, (acc, x) => acc + x)
show total     -- 15
</code></pre>

<h2 id="pipes">8. The Pipe Operator</h2>
<p>Pipes are Clarity's superpower. They let you chain operations left-to-right:</p>
<pre><code>-- Without pipes (hard to read)
show join(sort(unique(map(words, lower))), ", ")

-- With pipes (clear data flow)
let result = words
    |> map(lower)
    |> unique()
    |> sort()
    |> join(", ")
show result
</code></pre>
<div class="tip"><strong>How pipes work:</strong> <code>x |> f()</code> becomes <code>f(x)</code>. The value on the left is passed as the first argument to the function on the right.</div>

<h2 id="classes">9. Classes</h2>
<pre><code>class Todo {
    fn init(title) {
        this.title = title
        this.done = false
    }

    fn complete() {
        this.done = true
    }

    fn to_string() {
        let mark = if this.done { "x" } else { " " }
        return "[{mark}] {this.title}"
    }
}

let task = Todo("Learn Clarity")
show task.to_string()   -- [ ] Learn Clarity
task.complete()
show task.to_string()   -- [x] Learn Clarity
</code></pre>

<p>Inheritance with <code>&lt;</code>:</p>
<pre><code>class PriorityTodo < Todo {
    fn init(title, priority) {
        this.title = title
        this.done = false
        this.priority = priority
    }
}
</code></pre>

<h2 id="matching">10. Pattern Matching</h2>
<pre><code>fn describe(value) {
    match value {
        when 0 { return "zero" }
        when 1 { return "one" }
        when 2 { return "two" }
        else { return "many: " + str(value) }
    }
}

show describe(0)   -- zero
show describe(42)  -- many: 42
</code></pre>

<h2 id="errors">11. Error Handling</h2>
<pre><code>fn safe_divide(a, b) {
    if b == 0 { throw "Cannot divide by zero" }
    return a / b
}

try {
    show safe_divide(10, 0)
} catch e {
    show "Caught: " + str(e)
}
-- Output: Caught: Cannot divide by zero
</code></pre>

<h2 id="modules">12. Modules</h2>
<p>Split code across files:</p>
<pre><code>-- math_utils.clarity
fn square(n) { n * n }
fn cube(n) { n * n * n }
</code></pre>
<pre><code>-- main.clarity
from "math_utils.clarity" import square, cube

show square(4)   -- 16
show cube(3)     -- 27
</code></pre>

<h2 id="project">13. Build a CLI Tool</h2>
<p>Let's build a word counter. Create <code>wc.clarity</code>:</p>
<pre><code>-- Word counter — counts lines, words, and characters in a file

let cli_args = args()

if len(cli_args) == 0 {
    show "Usage: clarity run wc.clarity &lt;file&gt;"
    exit(1)
}

let path = cli_args[0]

if not exists(path) {
    show "File not found: {path}"
    exit(1)
}

let content = read(path)
let line_list = split(content, "\n")
let word_list = split(trim(content), " ")
    |> filter(w => len(trim(w)) > 0)

show "  {len(line_list)} lines"
show "  {len(word_list)} words"
show "  {len(content)} characters"
show "  {path}"
</code></pre>
<pre><code>clarity run wc.clarity wc.clarity
</code></pre>

<h2 id="testing">14. Testing</h2>
<p>Create <code>test_wc.clarity</code>:</p>
<pre><code>fn test_word_count() {
    let text = "hello world foo bar"
    let words = split(trim(text), " ")
        |> filter(w => len(trim(w)) > 0)
    assert(len(words) == 4, "Expected 4 words")
}

fn test_empty_string() {
    let text = ""
    let words = split(trim(text), " ")
        |> filter(w => len(trim(w)) > 0)
    assert(len(words) == 0, "Expected 0 words")
}
</code></pre>
<pre><code>clarity test .
</code></pre>
<p>Clarity automatically discovers and runs all <code>fn test_*()</code> functions in <code>test_*.clarity</code> files.</p>

<h2 id="next">15. Next Steps</h2>
<p>You now know the fundamentals. Here's where to go next:</p>
<ul style="margin-left: 1.5rem; margin-bottom: 1rem;">
<li><a href="reference.html">Language Reference</a> — complete syntax and semantics</li>
<li><a href="index.html">API Documentation</a> — all built-in functions</li>
<li><a href="../playground/index.html">Playground</a> — experiment in your browser</li>
<li><a href="https://github.com/monkdim/Clarity/tree/main/examples">Examples</a> — real programs on GitHub</li>
</ul>
<p>Run <code>clarity help</code> to see all available commands. Happy coding!</p>

</main>
</div>

<script>
const sections = document.querySelectorAll('h1[id], h2[id]');
const navLinks = document.querySelectorAll('nav a');
window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(s => { if (window.scrollY >= s.offsetTop - 100) current = s.id; });
    navLinks.forEach(a => { a.classList.toggle('active', a.getAttribute('href') === '#' + current); });
});
</script>
</body>
</html>
